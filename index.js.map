{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const API_KEY = '49351847-475dcb2d908ee06e87d68c158';\nconst BASE_URL = 'https://pixabay.com/api/';\nimport axios from 'axios';\n\nexport async function fetchImages(searchQuery, page = 1) {\n  const searchParams = new URLSearchParams({\n    key: API_KEY,\n    q: searchQuery,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page: page,\n  });\n\n  try {\n    const response = await axios.get(`${BASE_URL}?${searchParams}`);\n    return response.data;\n  } catch (error) {\n    throw new Error(\n      `HTTP error! Status: ${error.response?.status || 'Unknown'}`\n    );\n  }\n}\n","export function showLoader() {\n  document.querySelector('.loader').classList.remove('is-hidden');\n}\n\nexport function hideLoader() {\n  document.querySelector('.loader').classList.add('is-hidden');\n}\n\nexport function clearGallery() {\n  const gallery = document.querySelector('.gallery');\n  if (gallery) {\n    gallery.innerHTML = '';\n  }\n}\n\nexport function renderGallery(images) {\n  const gallery = document.querySelector('.gallery');\n\n  if (!gallery) return;\n\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n      <li class=\"gallery-item\">\n        <a href=\"${largeImageURL}\" class=\"gallery-link\">\n          <div class=\"photo-card\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n            <div class=\"info\">\n              <p class=\"info-item\">\n                <b>Likes</b>\n                ${likes}\n              </p>\n              <p class=\"info-item\">\n                <b>Views</b>\n                ${views}\n              </p>\n              <p class=\"info-item\">\n                <b>Comments</b>\n                ${comments}\n              </p>\n              <p class=\"info-item\">\n                <b>Downloads</b>\n                ${downloads}\n              </p>\n            </div>\n          </div>\n        </a>\n      </li>\n    `;\n      }\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchImages } from './js/pixabay-api.js';\nimport {\n  showLoader,\n  hideLoader,\n  clearGallery,\n  renderGallery,\n} from './js/render-functions.js';\n\nconst searchForm = document.getElementById('search-form');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nlet lightbox = new SimpleLightbox('.gallery .gallery-link', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nlet currentPage = 1;\nlet currentSearchQuery = '';\n\nsearchForm.addEventListener('submit', handleSearch);\nloadMoreBtn.addEventListener('click', handleLoadMore);\n\nasync function fetchAndRenderImages(searchQuery, page, append = false) {\n  loadMoreBtn.classList.add('is-hidden');\n  showLoader();\n\n  try {\n    if (!append) {\n      clearGallery();\n    }\n\n    const data = await fetchImages(searchQuery, page);\n\n    if (data.hits.length === 0) {\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      return;\n    }\n\n    renderGallery(data.hits);\n    lightbox.refresh();\n\n    if (append) {\n      const { height: cardHeight } = document\n        .querySelector('.gallery-item')\n        .getBoundingClientRect();\n\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n    }\n\n    if (data.totalHits > page * 15) {\n      loadMoreBtn.classList.remove('is-hidden');\n    } else if (append) {\n      iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n\n    return data;\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: `An error occurred: ${error.message}`,\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n}\n\nasync function handleSearch(event) {\n  event.preventDefault();\n\n  const form = event.currentTarget;\n  const searchQuery = form.elements.searchQuery.value.trim();\n\n  if (!searchQuery) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search query',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  currentPage = 1;\n  currentSearchQuery = searchQuery;\n\n  await fetchAndRenderImages(searchQuery, currentPage);\n  form.reset();\n}\n\nasync function handleLoadMore() {\n  currentPage += 1;\n  await fetchAndRenderImages(currentSearchQuery, currentPage, true);\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","searchQuery","page","searchParams","axios","error","_a","showLoader","hideLoader","clearGallery","gallery","renderGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","searchForm","loadMoreBtn","lightbox","SimpleLightbox","currentPage","currentSearchQuery","handleSearch","handleLoadMore","fetchAndRenderImages","append","data","iziToast","cardHeight","event","form"],"mappings":"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"}